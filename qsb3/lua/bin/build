#!/bin/bash

# build unifile qsb
lua writer.lua
cd ../../ldoc
lua ldoc.lua -d ../doc/html ../lua/modules
cd ../luaminifyer
./LuaMinify.sh ../lua/var/qsb.lua
cd ../lua/bin
lua docbuilder.lua
rm -rf ../../doc/html/js
cp -r ../tpl/js ../../doc/html
rm -rf ../../doc/html/css
cp -r ../tpl/css ../../doc/html
cd ../var
#rm qsb.lua
#mv qsb_min.lua qsb.lua

# copy to shipment repo
cd ../..
mkdir --parents Swift/modules
rm -rf Swift/modules/*
cp -r lua/modules/* Swift/modules
mkdir --parents Swift/default
rm -rf Swift/default/*
cp -r default/* Swift/default
mkdir --parents Swift/doc
rm -rf Swift/doc/*
cp -r doc/* Swift/doc